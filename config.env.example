# ============================================
# Конфигурация LSE Trading System (шаблон)
# ============================================
# Скопируйте этот файл в config.env и заполните реальными значениями

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql://postgres:1234@localhost:5432/lse_trading

# ============================================
# OpenAI/ProxyAPI Configuration
# ============================================
OPENAI_API_KEY=your_proxyapi_key_here
# Прокси OpenAI: https://api.proxyapi.ru/openai/v1
# OpenRouter (через proxyapi): https://api.proxyapi.ru/openrouter/v1 — тогда OPENAI_MODEL = id из OpenRouter (например anthropic/claude-sonnet-4.6)
OPENAI_BASE_URL=https://api.proxyapi.ru/openai/v1
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.2
OPENAI_TIMEOUT=60
# Сравнение нескольких моделей: через запятую "model" или "provider|model" (openai, anthropic, google)
# Пример: gpt-4o,openai|gpt-5.2,anthropic|claude-opus-4-6,google|gemini-3.1-pro-preview
# LLM_COMPARE_MODELS=gpt-4o,openai|gpt-5.2,anthropic|claude-opus-4-6,google|gemini-3.1-pro-preview
# Подбор модели: docs/LLM_MODEL_SELECTION.md

# ============================================
# Embedding Configuration (для векторной БЗ — Vector KB)
# ============================================
# Локальная модель (sentence-transformers / Hugging Face). Используется, если не включены облачные эмбеддинги.
# Примеры: intfloat/multilingual-e5-base (мультиязычный, 768 dim), sentence-transformers/all-mpnet-base-v2
HF_MODEL_NAME=intfloat/multilingual-e5-base

# Облачные эмбеддинги (если локальная модель даёт Bus error / core dumped):
# USE_OPENAI_EMBEDDINGS=true
# (тот же OPENAI_API_KEY и OPENAI_BASE_URL что для GPT-4o; модель text-embedding-3-small, 768 dim)
# Альтернатива — Gemini: USE_GEMINI_EMBEDDINGS=true, GEMINI_API_KEY=...

# ============================================
# Sentiment Analysis Configuration
# ============================================
# При добавлении новостей (CLI, CSV, веб): считать sentiment через LLM сразу
SENTIMENT_AUTO_CALCULATE=true
# Модель для LLM задаётся в OPENAI_MODEL выше; SENTIMENT_LLM_MODEL не используется в коде
# USE_LLM — включение LLM для крона add_sentiment_to_news_cron (backfill по новостям без sentiment)
USE_LLM=true

# ============================================
# Trading Configuration
# ============================================
INITIAL_CASH_USD=100000.0
COMMISSION_RATE=0
STOP_LOSS_LEVEL=0.95
# Песочница: проскальзывание при продаже (%). Реальная цена исполнения может быть хуже последней котировки (цена просела). 0 = отключено, 0.3 = консервативно.
# SANDBOX_SLIPPAGE_SELL_PCT=0.3

# ============================================
# Игры: быстрая (5m) и портфельная
# ============================================
# Cron: GAME 5m — send_sndk_signal_cron.py (тикеры из TICKERS_FAST или аргумент).
#       Портфельная — trading_cycle_cron.py (тикеры из TICKERS_MEDIUM+TICKERS_LONG или TRADING_CYCLE_TICKERS, или аргумент).
# См. docs/TICKER_GROUPS.md

# ---- Быстрая игра (5m, интрадей) — только тикеры с 5m данными (Yahoo) ----
TICKERS_FAST=SNDK,MU,LITE
# Тикеры, по которым крон запускает игру 5m (вход/выход). Пусто = все из TICKERS_FAST.
# LITE маловолатильная — исключить из игры, оставив в графиках: GAME_5M_TICKERS=SNDK,MU
# GAME_5M_TICKERS=SNDK,MU
# Cooldown между рассылками сигнала на вход по одному тикеру (минуты)
GAME_5M_COOLDOWN_MINUTES=120
# Параметры стратегии 5m (видны в game5m_status, /game5m, API)
GAME_5M_STOP_LOSS_PCT=2.5
GAME_5M_STOP_TO_TAKE_RATIO=0.5
GAME_5M_STOP_LOSS_MIN_PCT=0.5
GAME_5M_TAKE_PROFIT_PCT=5.0
GAME_5M_TAKE_PROFIT_MIN_PCT=1.0
GAME_5M_MAX_POSITION_DAYS=2
# Премаркет-крон (scripts/premarket_cron.py): при true отправлять алерт в Telegram (тикеры, гэп %, мин до открытия)
# PREMARKET_ALERT_TELEGRAM=false

# ---- Портфельная игра (дневные стратегии, 9:00/13:00/17:00) ----
# Тикеры: TICKERS_MEDIUM + TICKERS_LONG. Либо явный список: TRADING_CYCLE_TICKERS=...
TICKERS_MEDIUM=ALAB,MU,TER,AMD
TICKERS_LONG=MSFT,GBPUSD=X,GC=F,^VIX
# Явный список тикеров для trading_cycle_cron (если не задан — берутся MEDIUM + LONG)
# TRADING_CYCLE_TICKERS=ALAB,MU,TER,MSFT,GBPUSD=X
# Тикеры для дашборда (по умолчанию SNDK,MU,LITE,ALAB,TER,MSFT)
# DASHBOARD_WATCHLIST=SNDK,MU,LITE,ALAB,TER,MSFT

# ============================================
# Web Interface Configuration
# ============================================
WEB_HOST=0.0.0.0
WEB_PORT=8000

# ============================================
# News Sources API Keys
# ============================================
# NewsAPI.org - агрегатор новостей (бесплатный tier: 100 запросов/день)
# NEWSAPI_KEY=your_newsapi_key_here

# Alpha Vantage - Earnings Calendar и News Sentiment
# ALPHAVANTAGE_KEY=your_alphavantage_key_here
# Бесплатный план: 25 запросов/день. Экономические и технические индикаторы съедают лимит — оставьте выключенными:
# ALPHAVANTAGE_FETCH_ECONOMIC=false
# ALPHAVANTAGE_FETCH_TECHNICAL=false
# (по умолчанию оба false; тогда идут только Earnings + News.)
# Не сохранять Earnings Calendar в KB (записи «Earnings report for X» — мусор). Очистка: scripts/cleanup_calendar_noise.py
# EARNINGS_CALENDAR_SAVE=false
# Тикеры для Alpha Vantage Earnings (если EARNINGS_CALENDAR_SAVE=true): EARNINGS_TRACK_TICKERS=MSFT,SNDK,MU,LITE,ALAB,TER
# Таймауты/повторы (опционально): ALPHAVANTAGE_TIMEOUT=90 ALPHAVANTAGE_MAX_RETRIES=3 ALPHAVANTAGE_RETRY_DELAY=10 ALPHAVANTAGE_MIN_DELAY_SEC=1

# --------------------------------------------
# Investing.com News (лента stock-market-news)
# --------------------------------------------
# Тикеры — из TICKERS_FAST. Ключевые слова — встроенные (SNDK: SanDisk, Western Digital, WDC;
# LITE: Lumentum; и т.д.). Опционально дополнение (добавляет к встроенным, не заменяет):
# INVESTING_NEWS_TICKER_KEYWORDS=SNDK:Citron,short
# При 403 Forbidden задайте HTTP(S)-прокси (браузерный или резидентный):
# INVESTING_NEWS_PROXY=http://user:pass@host:port
# или INVESTING_NEWS_PROXY=socks5://127.0.0.1:1080

# --------------------------------------------
# LLM как источник новостей (перед решением 5m и в cron)
# --------------------------------------------
# USE_LLM_NEWS=true
# LLM_NEWS_TICKERS=SNDK,MU
# Не чаще одной LLM-новости по тикеру за N часов (дедупликация)
# LLM_NEWS_COOLDOWN_HOURS=24

# ============================================
# Telegram Bot Configuration
# ============================================
# TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather
# TELEGRAM_ALLOWED_USERS=user_id1,user_id2
# TELEGRAM_WEBHOOK_URL=https://your-service.run.app/webhook
# Прокси для доступа к api.telegram.org (если заблокирован): http://host:port или https://...
# TELEGRAM_PROXY_URL=http://127.0.0.1:7890
# Рассылка сигналов (send_sndk_signal_cron, premarket): чаты через запятую или один TELEGRAM_SIGNAL_CHAT_ID
# TELEGRAM_SIGNAL_CHAT_IDS=chat_id1,chat_id2
# TELEGRAM_SIGNAL_CHAT_ID=один_чат
# Упоминания в сообщениях (например @username): TELEGRAM_SIGNAL_MENTIONS=@user1 @user2
# Чат для дашборда (send_dashboard_cron): TELEGRAM_DASHBOARD_CHAT_ID=chat_id

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=INFO
LOG_DIR=logs

# Полный разбор опций и рекомендации: docs/CONFIG_OPTIONS_ANALYSIS.md

