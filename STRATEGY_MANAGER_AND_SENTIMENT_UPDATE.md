# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: Strategy Manager –∏ –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –®–∫–∞–ª–∞ Sentiment

## –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:

1. **–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∫–∞–ª–∞ sentiment (-1.0 –¥–æ 1.0)**
2. **–†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã**
3. **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Strategy Manager**
4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ insight –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π**
5. **–¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å**

---

## 1. –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∫–∞–ª–∞ Sentiment

### –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —à–∫–∞–ª–∞ 0.0-1.0, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–ª–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–º–Ω–æ–∂–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ sentiment).

### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `utils/sentiment_utils.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- `normalize_sentiment(0.0-1.0) -> -1.0 –¥–æ 1.0`
- `denormalize_sentiment(-1.0 –¥–æ 1.0) -> 0.0-1.0)`
- `apply_sentiment_to_signal()` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ sentiment –∫ —Å–∏–≥–Ω–∞–ª—É

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- –£–¥–æ–±–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (sentiment = 0 –Ω–µ–π—Ç—Ä–∞–ª–∏–∑—É–µ—Ç —Å–∏–≥–Ω–∞–ª)
- –ü—Ä–æ—Å—Ç–æ–µ —É–º–Ω–æ–∂–µ–Ω–∏–µ: `signal * sentiment`
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–ë–î —Ö—Ä–∞–Ω–∏—Ç 0.0-1.0, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç -1.0 –¥–æ 1.0)

---

## 2. –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
strategies/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ base_strategy.py          # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îú‚îÄ‚îÄ momentum_strategy.py      # –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–Ω–¥—É
‚îú‚îÄ‚îÄ mean_reversion_strategy.py # –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å—Ä–µ–¥–Ω–µ–º—É
‚îî‚îÄ‚îÄ volatile_gap_strategy.py  # –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –≥—ç–ø–æ–≤
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è
- –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ `BaseStrategy`
- –ú–µ—Ç–æ–¥—ã `is_suitable()` –∏ `calculate_signal()`
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `insight` –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π

---

## 3. Strategy Manager

### –§–∞–π–ª: `strategy_manager.py`

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (volatility_ratio)
- Sentiment (—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∫–∞–ª–∞)
- –¶–µ–Ω–æ–≤—ã—Ö –≥—ç–ø–æ–≤ (gap_percent)

### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞

1. **VolatileGapStrategy**: 
   - –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (>1.5x —Å—Ä–µ–¥–Ω–µ–≥–æ)
   - –ë–æ–ª—å—à–æ–π –≥—ç–ø (>3%) –∏–ª–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π sentiment (>0.6)

2. **MomentumStrategy**:
   - –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (<1.0x —Å—Ä–µ–¥–Ω–µ–≥–æ)
   - –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π sentiment (>0.3)

3. **MeanReversionStrategy**:
   - –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (>1.2x —Å—Ä–µ–¥–Ω–µ–≥–æ)
   - –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π sentiment (-0.4 –¥–æ 0.4)

4. **NeutralStrategy** (fallback):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω–∏ –æ–¥–Ω–∞ –∏–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤—ã—à–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç
   - –†–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω (–Ω–µ—Ç —Ç—Ä–µ–Ω–¥–∞, –≥—ç–ø–∞, —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–≥–æ sentiment) ‚Üí –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π HOLD

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from strategy_manager import get_strategy_manager

manager = get_strategy_manager()
strategy = manager.select_strategy(
    ticker="SNDK",
    technical_data={...},
    news_data=[...],
    sentiment_score=0.8  # –í —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∫–∞–ª–µ
)
```

---

## 4. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Insight –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. **`services/sentiment_analyzer.py`**:
   - `calculate_sentiment()` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `(sentiment, insight)`
   - LLM –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–ª—é—á–µ–≤–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ñ–∞–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Ä–æ—Å—Ç 163%")

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `insight TEXT` –≤ —Ç–∞–±–ª–∏—Ü—É `knowledge_base`
   - –û–±–Ω–æ–≤–ª–µ–Ω `init_db.py` –∏ `news_importer.py`

3. **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏**:
   - –ú–µ—Ç–æ–¥ `_extract_insight()` –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
   - Insight –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ö –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### –ü—Ä–∏–º–µ—Ä

```python
sentiment, insight = calculate_sentiment("–ö–æ–º–ø–∞–Ω–∏—è –ø–æ–∫–∞–∑–∞–ª–∞ —Ä–æ—Å—Ç –≤—ã—Ä—É—á–∫–∏ –Ω–∞ 163%")
# sentiment = 0.9
# insight = "—Ä–æ—Å—Ç 163%"
```

---

## 5. –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å

### –§–∞–π–ª: `docs/TRADING_GLOSSARY.md`

–°–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
- **ATR** (Average True Range)
- **Sentiment Drift** (–î—Ä–µ–π—Ñ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π)
- **Momentum** (–°–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥—É)
- **Mean Reversion** (–í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ä–µ–¥–Ω–µ–º—É)
- **Volatile Gap** (–í–æ–ª–∞—Ç–∏–ª—å–Ω—ã–π –≥—ç–ø)
- **RSI** (Relative Strength Index)
- **Strategy Manager** (–ú–µ–Ω–µ–¥–∂–µ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–π)
- –ò –¥—Ä—É–≥–∏–µ —Ç–µ—Ä–º–∏–Ω—ã

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AnalystAgent

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

1. **–ò–º–ø–æ—Ä—Ç—ã**:
   ```python
   from strategy_manager import get_strategy_manager
   from utils.sentiment_utils import normalize_sentiment, denormalize_sentiment
   ```

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**:
   - `self.strategy_manager` –≤–º–µ—Å—Ç–æ `self.strategy_factory`
   - `STRATEGY_MANAGER_AVAILABLE` –≤–º–µ—Å—Ç–æ `STRATEGY_FACTORY_AVAILABLE`

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
   - Sentiment –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∫–∞–ª—É –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ 0.0-1.0 –¥–ª—è LLM –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
   - –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `sentiment` (0.0-1.0) –∏ `sentiment_normalized` (-1.0 –¥–æ 1.0)

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–µ `insight` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `knowledge_base`
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –∏–º–µ—é—Ç `insight = NULL`
- –ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç insight –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ sentiment

### –ö–æ–¥
- –°—Ç–∞—Ä—ã–π `strategies.py` –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (–Ω–æ –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–∏–ª–∏—Ç sentiment
```bash
python -c "from utils.sentiment_utils import normalize_sentiment; print(normalize_sentiment(0.5))"
# –í—ã–≤–æ–¥: 0.0 (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Strategy Manager
```bash
python -c "from strategy_manager import get_strategy_manager; sm = get_strategy_manager(); print(len(sm.get_all_strategies()))"
# –í—ã–≤–æ–¥: 3
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∫–∞–ª–∞ sentiment
2. ‚úÖ –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
3. ‚úÖ Strategy Manager
4. ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ insight
5. ‚úÖ –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å
6. üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è insight
7. üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

---

## –°–º. —Ç–∞–∫–∂–µ

- [Strategy Factory Documentation](docs/STRATEGY_FACTORY.md)
- [Trading Glossary](docs/TRADING_GLOSSARY.md)
- [LLM Integration Guide](docs/LLM_GUIDANCE.md)



